document.addEventListener('DOMContentLoaded', function () {
    const cruises = [
        {
            "title": "Atlantic Ocean Europe 7 days from/to Portsmouth",
            "departure": "9/23/24",
            "departure_top": "23.",
            "departure_bottom": "9/24",
            "departure_raw": "2024-09-23",
            "arrival": "9/29/24",
            "arrival_raw": "2024-09-29",
            "departure_cruise": "9/23/24",
            "arrival_cruise": "9/29/24",
            "duration": "6",
            "cruiseline": "Virgin Voyages",
            "included": "<ul><br>\n<li>Cruise in the cabin category booked.</li>\n<li>Full board.</li>\n<li>Entertainment program on board.</li>\n<li>Use of onboard facilities. (extra charges possible)</li>\n<li>Port charges and taxes.</li>\n<li>Luggages transportation to/from cabin.</li>\n<hr></ul>\n<br>\n<br>",
            "excluded": "<br>\n<ul><br>\n<li>Arrival and departure.</li>\n<li>Beverages, unless specified</li>\n<li>Meals and drinks in the specialty restaurants.</li>\n<li>Personal expenses aboard.</li>\n<li>Shore excursions.</li>\n<li>Medical service.</li>\n<li>Travel insurances.</li>\n<li>Recommended gratuities</li>\n<li>Visa, if necessary (extra charges possible).</li>\n</ul>\n<br>",
            "mastercruiseID": "I7259565240929",
            "mastercruiseID_org": "I7259565240929",
            "matchcode": "VIR-USD-USA",
            "currency": "USD",
            "currency_symbol": "$",
            "price": "$743",
            "price_min": "743",
            "price_strike": "",
            "pre_itin": "",
            "post_itin": "",
            "pricecat": [
                {
                    "id": "IS",
                    "text": "Inside cabin",
                    "price": "$743",
                    "price_strike": "0",
                    "min": true
                },
                {
                    "id": "OS",
                    "text": "Outside cabin",
                    "price": "$764",
                    "price_strike": "0",
                    "min": false
                },
                {
                    "id": "BK",
                    "text": "Balcony cabin",
                    "price": "$759",
                    "price_strike": "0",
                    "min": false
                },
                {
                    "id": "SU",
                    "text": "Suite",
                    "price": "$3,000",
                    "price_strike": "0",
                    "min": false
                }
            ],
            "ship": {
                "id": "I7",
                "name": "Resilient Lady",
                "online": "1",
                "cruiseLine": {
                    "id": "VIR",
                    "text": "Virgin Voyages"
                },
                "details": {
                    "category": "",
                    "type": "Virgin Voyages",
                    "year": "2023",
                    "speed": "20kn",
                    "cabins": "1404",
                    "passengers": "2762",
                    "weight": "110,000",
                    "length": "278",
                    "width": "",
                    "depth": ""
                },
                "description": "<p>From decadent dinners to boozy after-parties, gather with your partner, your best friends and yourself to celebrate life&#39;s best moments aboard one of the 100% adults-only voyages.</p>\r\n",
                "images": {
                    "ship": [
                        {
                            "name": "I7",
                            "url": "//images.cruisec.net/images/ships/ships/I7.jpg"
                        }
                    ],
                    "cabin": [
                        {
                            "name": "IS",
                            "url": "//images.cruisec.net/images/ships/cabins/I7_IS.jpg"
                        },
                        {
                            "name": "OS",
                            "url": "//images.cruisec.net/images/ships/cabins/I7_OS.jpg"
                        },
                        {
                            "name": "BK",
                            "url": "//images.cruisec.net/images/ships/cabins/I7_BK.jpg"
                        },
                        {
                            "name": "SU",
                            "url": "//images.cruisec.net/images/ships/cabins/I7_SU.jpg"
                        }
                    ],
                    "gallery": [
                        {
                            "name": "VIR_Restaurant_2",
                            "url": "//images.cruisec.net/images/ships/gallery/I7_0_VIR_Restaurant_2.jpg"
                        },
                        {
                            "name": "VIR_Burgerrestaurant",
                            "url": "//images.cruisec.net/images/ships/gallery/I7_00__VIR_Burgerrestaurant.jpg"
                        },
                        {
                            "name": "VIR_Sport",
                            "url": "//images.cruisec.net/images/ships/gallery/I7_01_VIR_Sport.jpg"
                        },
                        {
                            "name": "VIR_SPA",
                            "url": "//images.cruisec.net/images/ships/gallery/I7_02_VIR_SPA.jpg"
                        },
                        {
                            "name": "VIR_Theater",
                            "url": "//images.cruisec.net/images/ships/gallery/I7_03_VIR_Theater.jpg"
                        },
                        {
                            "name": "VIR_Disco",
                            "url": "//images.cruisec.net/images/ships/gallery/I7_04_VIR_Disco.jpg"
                        },
                        {
                            "name": "VIR_BBQ",
                            "url": "//images.cruisec.net/images/ships/gallery/I7_05_VIR_BBQ.jpg"
                        }
                    ]
                },
                "features": [
                    {
                        "id": "240",
                        "text": "Bars and Cafe s",
                        "children": [
                            {
                                "id": "96",
                                "text": "Coffeebar"
                            },
                            {
                                "id": "157",
                                "text": "Champagne/caviar bar"
                            },
                            {
                                "id": "302",
                                "text": "Club lounge"
                            },
                            {
                                "id": "95",
                                "text": "Cocktailbar"
                            },
                            {
                                "id": "98",
                                "text": "Pool bar"
                            },
                            {
                                "id": "156",
                                "text": "winecellar/vinothek"
                            }
                        ]
                    },
                    {
                        "id": "128",
                        "text": "on board language",
                        "children": [
                            {
                                "id": "217",
                                "text": "English"
                            }
                        ]
                    },
                    {
                        "id": "236",
                        "text": "travel documents",
                        "children": [
                            {
                                "id": "237",
                                "text": "Passport"
                            }
                        ]
                    },
                    {
                        "id": "267",
                        "text": "Environmental friendliness",
                        "children": [
                            {
                                "id": "284",
                                "text": "Waste water treatment system"
                            },
                            {
                                "id": "292",
                                "text": "LED lighting"
                            },
                            {
                                "id": "326",
                                "text": "Avoid single-use plastic"
                            }
                        ]
                    },
                    {
                        "id": "130",
                        "text": "communication",
                        "children": [
                            {
                                "id": "178",
                                "text": "wifi for free"
                            }
                        ]
                    },
                    {
                        "id": "222",
                        "text": "shiptype",
                        "children": [
                            {
                                "id": "223",
                                "text": "Sea"
                            }
                        ]
                    },
                    {
                        "id": "126",
                        "text": "food",
                        "children": [
                            {
                                "id": "140",
                                "text": "Asian restaurant"
                            },
                            {
                                "id": "136",
                                "text": "Buffet restaurant"
                            },
                            {
                                "id": "112",
                                "text": "Gelateria"
                            },
                            {
                                "id": "138",
                                "text": "italian restaurant"
                            },
                            {
                                "id": "148",
                                "text": "Mexican restaurant"
                            },
                            {
                                "id": "139",
                                "text": "Pizzeria"
                            },
                            {
                                "id": "160",
                                "text": "Seafood restaurant"
                            },
                            {
                                "id": "151",
                                "text": "steakhouse"
                            },
                            {
                                "id": "329",
                                "text": "Vegetarian restaurant"
                            }
                        ]
                    },
                    {
                        "id": "122",
                        "text": "Wellness/health",
                        "children": [
                            {
                                "id": "190",
                                "text": "Nutrition consulting/ cookery course "
                            },
                            {
                                "id": "86",
                                "text": "Medical section"
                            },
                            {
                                "id": "81",
                                "text": "HealthSPA"
                            },
                            {
                                "id": "188",
                                "text": "Whirlpool outside"
                            }
                        ]
                    },
                    {
                        "id": "129",
                        "text": "Entertainment",
                        "children": [
                            {
                                "id": "100",
                                "text": "disco"
                            },
                            {
                                "id": "104",
                                "text": "casino"
                            },
                            {
                                "id": "330",
                                "text": "Nightclub"
                            },
                            {
                                "id": "89",
                                "text": "theatre"
                            }
                        ]
                    },
                    {
                        "id": "123",
                        "text": "sport",
                        "children": [
                            {
                                "id": "82",
                                "text": "Sporting club"
                            },
                            {
                                "id": "173",
                                "text": "Jogging/Walking Parcour"
                            },
                            {
                                "id": "84",
                                "text": "Pool outside"
                            }
                        ]
                    }
                ]
            },
            "route": {
                "days": [
                    { "number": "1", "port": "Portsmouth", "country": "United Kingdom", "arrival": "", "departure": "18:00" },
                    { "number": "2", "port": "Cruising Day", "country": "", "arrival": "", "departure": "" },
                    { "number": "3", "port": "La Coruna", "country": "Spain", "arrival": "08:00", "departure": "17:00" },
                    { "number": "4", "port": "Bilbao", "country": "Spain", "arrival": "10:00", "departure": "18:00" },
                    { "number": "5", "port": "Le Verdon-sur-Mer", "country": "France", "arrival": "08:00", "departure": "20:00" },
                    { "number": "6", "port": "Cruising Day", "country": "", "arrival": "", "departure": "" },
                    { "number": "7", "port": "Portsmouth", "country": "United Kingdom", "arrival": "06:00", "departure": "" }
                ],
                "points": [
                    { "lat": "50.811386", "long": "-1.096752", "text": "Portsmouth" },
                    { "lat": "43.369004", "long": "-8.396652", "text": "La Coruna" },
                    { "lat": "43.33061", "long": "-3.016176", "text": "Bilbao" },
                    { "lat": "45.556982", "long": "-1.062591", "text": "Le Verdon-sur-Mer" },
                    { "lat": "50.811386", "long": "-1.096752", "text": "Portsmouth" }
                ]
            }
        },
        {
            "title": "Atlantic Ocean Europe 7 days from/to Portsmouth",
            "departure": "9/8/24",
            "departure_top": "8.",
            "departure_bottom": "9/24",
            "departure_raw": "2024-09-08",
            "arrival": "9/14/24",
            "arrival_raw": "2024-09-14",
            "departure_cruise": "9/8/24",
            "arrival_cruise": "9/14/24",
            "duration": "6",
            "cruiseline": "Virgin Voyages",
            "included": "<ul><br>\n<li>Cruise in the cabin category booked.</li>\n<li>Full board.</li>\n<li>Entertainment program on board.</li>\n<li>Use of onboard facilities. (extra charges possible)</li>\n<li>Port charges and taxes.</li>\n<li>Luggages transportation to/from cabin.</li>\n<hr></ul>\n<br>\n<br>",
            "excluded": "<br>\n<ul><br>\n<li>Arrival and departure.</li>\n<li>Beverages, unless specified</li>\n<li>Meals and drinks in the specialty restaurants.</li>\n<li>Personal expenses aboard.</li>\n<li>Shore excursions.</li>\n<li>Medical service.</li>\n<li>Travel insurances.</li>\n<li>Recommended gratuities</li>\n<li>Visa, if necessary (extra charges possible).</li>\n</ul>\n<br>",
            "mastercruiseID": "I7259560240914",
            "mastercruiseID_org": "I7259560240914",
            "matchcode": "VIR-USD-USA",
            "currency": "USD",
            "currency_symbol": "$",
            "price": "$783",
            "price_min": "783",
            "price_strike": "",
            "pre_itin": "",
            "post_itin": "",
            "pricecat": [
                {
                    "id": "IS",
                    "text": "Inside cabin",
                    "price": "$783",
                    "price_strike": "0",
                    "min": true
                },
                {
                    "id": "OS",
                    "text": "Outside cabin",
                    "price": "$894",
                    "price_strike": "0",
                    "min": false
                },
                {
                    "id": "BK",
                    "text": "Balcony cabin",
                    "price": "$1,019",
                    "price_strike": "0",
                    "min": false
                },
                {
                    "id": "SU",
                    "text": "Suite",
                    "price": "$6,112",
                    "price_strike": "0",
                    "min": false
                }
            ],
            "ship": {
                "id": "I7",
                "name": "Resilient Lady",
                "online": "1",
                "cruiseLine": {
                    "id": "VIR",
                    "text": "Virgin Voyages"
                },
                "details": {
                    "category": "",
                    "type": "Virgin Voyages",
                    "year": "2023",
                    "speed": "20kn",
                    "cabins": "1404",
                    "passengers": "2762",
                    "weight": "110,000",
                    "length": "278",
                    "width": "",
                    "depth": ""
                },
                "description": "<p>From decadent dinners to boozy after-parties, gather with your partner, your best friends and yourself to celebrate life&#39;s best moments aboard one of the 100% adults-only voyages.</p>\r\n",
                "images": {
                    "ship": [
                        {
                            "name": "I7",
                            "url": "//images.cruisec.net/images/ships/ships/I7.jpg"
                        }
                    ],
                    "cabin": [
                        {
                            "name": "IS",
                            "url": "//images.cruisec.net/images/ships/cabins/I7_IS.jpg"
                        },
                        {
                            "name": "OS",
                            "url": "//images.cruisec.net/images/ships/cabins/I7_OS.jpg"
                        },
                        {
                            "name": "BK",
                            "url": "//images.cruisec.net/images/ships/cabins/I7_BK.jpg"
                        },
                        {
                            "name": "SU",
                            "url": "//images.cruisec.net/images/ships/cabins/I7_SU.jpg"
                        }
                    ],
                    "gallery": [
                        {
                            "name": "VIR_Restaurant_2",
                            "url": "//images.cruisec.net/images/ships/gallery/I7_0_VIR_Restaurant_2.jpg"
                        },
                        {
                            "name": "VIR_Burgerrestaurant",
                            "url": "//images.cruisec.net/images/ships/gallery/I7_00__VIR_Burgerrestaurant.jpg"
                        },
                        {
                            "name": "VIR_Sport",
                            "url": "//images.cruisec.net/images/ships/gallery/I7_01_VIR_Sport.jpg"
                        },
                        {
                            "name": "VIR_SPA",
                            "url": "//images.cruisec.net/images/ships/gallery/I7_02_VIR_SPA.jpg"
                        },
                        {
                            "name": "VIR_Theater",
                            "url": "//images.cruisec.net/images/ships/gallery/I7_03_VIR_Theater.jpg"
                        },
                        {
                            "name": "VIR_Disco",
                            "url": "//images.cruisec.net/images/ships/gallery/I7_04_VIR_Disco.jpg"
                        },
                        {
                            "name": "VIR_BBQ",
                            "url": "//images.cruisec.net/images/ships/gallery/I7_05_VIR_BBQ.jpg"
                        }
                    ]
                },
                "features": [
                    {
                        "id": "240",
                        "text": "Bars and Cafe s",
                        "children": [
                            {
                                "id": "96",
                                "text": "Coffeebar"
                            },
                            {
                                "id": "157",
                                "text": "Champagne/caviar bar"
                            },
                            {
                                "id": "302",
                                "text": "Club lounge"
                            },
                            {
                                "id": "95",
                                "text": "Cocktailbar"
                            },
                            {
                                "id": "98",
                                "text": "Pool bar"
                            },
                            {
                                "id": "156",
                                "text": "winecellar/vinothek"
                            }
                        ]
                    },
                    {
                        "id": "128",
                        "text": "on board language",
                        "children": [
                            {
                                "id": "217",
                                "text": "English"
                            }
                        ]
                    },
                    {
                        "id": "236",
                        "text": "travel documents",
                        "children": [
                            {
                                "id": "237",
                                "text": "Passport"
                            }
                        ]
                    },
                    {
                        "id": "267",
                        "text": "Environmental friendliness",
                        "children": [
                            {
                                "id": "284",
                                "text": "Waste water treatment system"
                            },
                            {
                                "id": "292",
                                "text": "LED lighting"
                            },
                            {
                                "id": "326",
                                "text": "Avoid single-use plastic"
                            }
                        ]
                    },
                    {
                        "id": "130",
                        "text": "communication",
                        "children": [
                            {
                                "id": "178",
                                "text": "wifi for free"
                            }
                        ]
                    },
                    {
                        "id": "222",
                        "text": "shiptype",
                        "children": [
                            {
                                "id": "223",
                                "text": "Sea"
                            }
                        ]
                    },
                    {
                        "id": "126",
                        "text": "food",
                        "children": [
                            {
                                "id": "140",
                                "text": "Asian restaurant"
                            },
                            {
                                "id": "136",
                                "text": "Buffet restaurant"
                            },
                            {
                                "id": "112",
                                "text": "Gelateria"
                            },
                            {
                                "id": "138",
                                "text": "italian restaurant"
                            },
                            {
                                "id": "148",
                                "text": "Mexican restaurant"
                            },
                            {
                                "id": "139",
                                "text": "Pizzeria"
                            },
                            {
                                "id": "160",
                                "text": "Seafood restaurant"
                            },
                            {
                                "id": "151",
                                "text": "steakhouse"
                            },
                            {
                                "id": "329",
                                "text": "Vegetarian restaurant"
                            }
                        ]
                    },
                    {
                        "id": "122",
                        "text": "Wellness/health",
                        "children": [
                            {
                                "id": "190",
                                "text": "Nutrition consulting/ cookery course "
                            },
                            {
                                "id": "86",
                                "text": "Medical section"
                            },
                            {
                                "id": "81",
                                "text": "HealthSPA"
                            },
                            {
                                "id": "188",
                                "text": "Whirlpool outside"
                            }
                        ]
                    },
                    {
                        "id": "129",
                        "text": "Entertainment",
                        "children": [
                            {
                                "id": "100",
                                "text": "disco"
                            },
                            {
                                "id": "104",
                                "text": "casino"
                            },
                            {
                                "id": "330",
                                "text": "Nightclub"
                            },
                            {
                                "id": "89",
                                "text": "theatre"
                            }
                        ]
                    },
                    {
                        "id": "123",
                        "text": "sport",
                        "children": [
                            {
                                "id": "82",
                                "text": "Sporting club"
                            },
                            {
                                "id": "173",
                                "text": "Jogging/Walking Parcour"
                            },
                            {
                                "id": "84",
                                "text": "Pool outside"
                            }
                        ]
                    }
                ]
            },
            "route": {
                "days": [
                    { "number": "1", "port": "Portsmouth", "country": "United Kingdom", "arrival": "", "departure": "18:00" },
                    { "number": "2", "port": "Cruising Day", "country": "", "arrival": "", "departure": "" },
                    { "number": "3", "port": "La Coruna", "country": "Spain", "arrival": "08:00", "departure": "17:00" },
                    { "number": "4", "port": "Bilbao", "country": "Spain", "arrival": "10:00", "departure": "18:00" },
                    { "number": "5", "port": "Le Verdon-sur-Mer", "country": "France", "arrival": "08:00", "departure": "20:00" },
                    { "number": "6", "port": "Cruising Day", "country": "", "arrival": "", "departure": "" },
                    { "number": "7", "port": "Portsmouth", "country": "United Kingdom", "arrival": "06:00", "departure": "" }
                ],
                "points": [
                    { "lat": "50.811386", "long": "-1.096752", "text": "Portsmouth" },
                    { "lat": "43.369004", "long": "-8.396652", "text": "La Coruna" },
                    { "lat": "43.33061", "long": "-3.016176", "text": "Bilbao" },
                    { "lat": "45.556982", "long": "-1.062591", "text": "Le Verdon-sur-Mer" },
                    { "lat": "50.811386", "long": "-1.096752", "text": "Portsmouth" }
                ]
            }
        }
    ];

    // Function to store cruise details in localStorage and redirect to details page
    function viewCruiseDetails(mastercruiseID) {
        const selectedCruise = cruises.find(cruise => cruise.mastercruiseID === mastercruiseID) || cruises[0];
        localStorage.setItem('selectedCruise', JSON.stringify(selectedCruise));
        window.location.href = 'cruise-details.html';
    }

    // Add event listeners to buttons or links
    document.querySelectorAll('.view-details').forEach(button => {
        button.addEventListener('click', function (event) {
            event.preventDefault();
            const mastercruiseID = this.getAttribute('data-mastercruiseid');
            viewCruiseDetails(mastercruiseID);
        });
    });

    // Code to populate the cruise details page
    if (window.location.pathname.includes('cruise-details.html')) {
        const selectedCruise = JSON.parse(localStorage.getItem('selectedCruise'));
        if (selectedCruise) {
            document.getElementById('cruise-title').innerText = selectedCruise.title;
            document.getElementById('cruise-route').innerText = `${selectedCruise.route.days[0].port} to ${selectedCruise.route.days[selectedCruise.route.days.length - 1].port}`;
            document.getElementById('ship-description').innerHTML = selectedCruise.ship.description;

            const leftStats = document.getElementById('ship-statistics-left');
            const rightStats = document.getElementById('ship-statistics-right');
            leftStats.innerHTML = `
                <li><span>Year Built:</span> ${selectedCruise.ship.details.year}</li>
                <li><span>Speed:</span> ${selectedCruise.ship.details.speed}</li>
            `;
            rightStats.innerHTML = `
                <li><span>Cabins:</span> ${selectedCruise.ship.details.cabins}</li>
                <li><span>Passengers:</span> ${selectedCruise.ship.details.passengers}</li>
                <li><span>Weight:</span> ${selectedCruise.ship.details.weight}</li>
                <li><span>Length:</span> ${selectedCruise.ship.details.length}</li>
            `;

            document.getElementById('included-list').innerHTML = selectedCruise.included;
            document.getElementById('excluded-list').innerHTML = selectedCruise.excluded;

            const itineraryTable = document.getElementById('itinerary-table');
            selectedCruise.route.days.forEach(day => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${day.number}</td>
                    <td>${day.port}, ${day.country}</td>
                    <td>${day.arrival}</td>
                    <td>${day.departure}</td>
                `;
                itineraryTable.appendChild(row);
            });

            const amenitiesList = document.getElementById('amenities-list');
            selectedCruise.ship.features.forEach(feature => {
                const col = document.createElement('div');
                col.classList.add('col-lg-6');
                const featureList = feature.children.map(child => `<li>${child.text}</li>`).join('');
                col.innerHTML = `
                    <div class="cruise-include-feature pt-3">
                        <h3 class="title font-size-15 font-weight-medium pb-2">${feature.text}</h3>
                        <ul class="list-items">${featureList}</ul>
                    </div>
                `;
                amenitiesList.appendChild(col);
            });

            const cabinAvailability = document.getElementById('cabin-availability');
            const dateRow = `
                <tr>
                    <td>${selectedCruise.departure} - ${selectedCruise.arrival}</td>
                    ${selectedCruise.pricecat.map(cat => `<td>${cat.price}</td>`).join('')}
                </tr>
            `;
            cabinAvailability.innerHTML = dateRow;

            const cabinTypes = document.getElementById('cabin-types');
            selectedCruise.pricecat.forEach(cat => {
                const cabinTypeDiv = document.createElement('div');
                cabinTypeDiv.classList.add('card-item', 'card-item-list');
                cabinTypeDiv.innerHTML = `
                    <div class="card-img">
                        <img src="${selectedCruise.ship.images.cabin.find(img => img.name === cat.id).url}" alt="${cat.text}">
                    </div>
                    <div class="card-body">
                        <h3 class="card-title">${cat.text}</h3>
                        <p class="card-meta">${cat.price}</p>
                    </div>
                `;
                cabinTypes.appendChild(cabinTypeDiv);
            });

        } else {
            document.getElementById('cruise-title').innerText = 'No cruise details found.';
        }
    }
});
